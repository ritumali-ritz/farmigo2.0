import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

class LanguageProvider with ChangeNotifier {
  static const String _langKey = 'selected_language';
  String _currentLocale = 'en';

  LanguageProvider() {
    _loadFromPrefs();
  }

  String get currentLocale => _currentLocale;

  final Map<String, Map<String, String>> _translations = {
    'en': {
      'welcome': 'Welcome',
      'good_morning': 'Good Morning',
      'good_afternoon': 'Good Afternoon',
      'good_evening': 'Good Evening',
      'friend': 'Friend',
      'explore': 'Explore fresh crops',
      'search_hint': 'Search for products...',
      'search_fresh_harvest': 'Search fresh harvest...',
      'categories': 'Categories',
      'fresh_picks': 'Fresh Picks for You',
      'add_to_cart': 'Add to Cart',
      'cart': 'My Cart',
      'orders': 'My Orders',
      'profile': 'Profile',
      'dark_mode': 'Midnight Mode',
      'language': 'Language',
      'logout': 'Log Out',
      'manage_orders': 'Manage Orders',
      'start_delivery': 'Start Delivery',
      'complete_delivery': 'Complete Delivery',
      'chat': 'Chat',
      'track_order': 'Track Order Live',
      'featured': 'Featured',
      'fresh_from_organic_farms': 'Fresh from\nOrganic Farms',
      'direct_harvest_to_your_door': 'Direct Harvest\nto Your Door',
      'support_local_farmers_today': 'Support Local\nFarmers Today',
      'no_products_found_in_category': 'No products found in this category',
      'description': 'Description',
      'sold_out': 'Sold Out',
      'product_added_to_cart': '{product_name} added to cart',
      'order_placed': 'Order Placed!',
      'order_success_msg': 'Your fresh products are being prepared by the farmer.',
      'awesome': 'Awesome!',
      'delivery_address': 'Delivery Address',
      'enter_address_hint': 'Enter address or fetch live',
      'total': 'Total',
      'place_order_cod': 'Place Order (COD)',
      'cart_empty': 'Your cart is empty!',
      'active': 'Active',
      'past': 'Past',
      'order_id': 'Order #{id}',
      'order_address': 'Address: {address}',
      'total_amount': 'Total Amount',
      'no_orders_found': 'No {type} orders found',
      'track_order_live': 'Track Order Live',
      'daily_subscription': 'Daily Subscription',
      'how_many_per_day': 'How many {unit} per day?',
      'cancel': 'Cancel',
      'confirm': 'Confirm',
      'subscription_active': 'Subscription active! üåø',
      'join_farmigo': 'Join Farmigo',
      'login_prompt': 'Please login to place orders and subscribe to fresh products.',
      'maybe_later': 'Maybe later',
      'login': 'Login',
      'farmer_info_not_available': 'Farmer info not available',
      'please_login_to_chat': 'Please login to chat',
      'subscribe_now': 'Subscribe Now',
    },
    'hi': {
      'welcome': '‡§®‡§Æ‡§∏‡•ç‡§§‡•á',
      'good_morning': '‡§∂‡•Å‡§≠ ‡§™‡•ç‡§∞‡§≠‡§æ‡§§',
      'good_afternoon': '‡§∂‡•Å‡§≠ ‡§¶‡•ã‡§™‡§π‡§∞',
      'good_evening': '‡§∂‡•Å‡§≠ ‡§∏‡§Ç‡§ß‡•ç‡§Ø‡§æ',
      'friend': '‡§¶‡•ã‡§∏‡•ç‡§§',
      'explore': '‡§§‡§æ‡§ú‡§æ ‡§´‡§∏‡§≤‡•á‡§Ç ‡§¶‡•á‡§ñ‡•á‡§Ç',
      'search_hint': '‡§â‡§§‡•ç‡§™‡§æ‡§¶‡•ã‡§Ç ‡§ï‡•Ä ‡§ñ‡•ã‡§ú ‡§ï‡§∞‡•á‡§Ç...',
      'search_fresh_harvest': '‡§§‡§æ‡§ú‡•Ä ‡§´‡§∏‡§≤‡•á‡§Ç ‡§ñ‡•ã‡§ú‡•á‡§Ç...',
      'categories': '‡§∂‡•ç‡§∞‡•á‡§£‡§ø‡§Ø‡§æ‡§Å',
      'fresh_picks': '‡§Ü‡§™‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡§æ‡§ú‡§º‡§æ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™',
      'add_to_cart': '‡§ï‡§æ‡§∞‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç',
      'cart': '‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§ü',
      'orders': '‡§Æ‡•á‡§∞‡•á ‡§ë‡§∞‡•ç‡§°‡§∞',
      'profile': '‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤',
      'dark_mode': '‡§Æ‡§ø‡§°‡§®‡§æ‡§á‡§ü ‡§Æ‡•ã‡§°',
      'language': '‡§≠‡§æ‡§∑‡§æ',
      'logout': '‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü',
      'manage_orders': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
      'start_delivery': '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç',
      'complete_delivery': '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§™‡•Ç‡§∞‡•Ä ‡§ï‡§∞‡•á‡§Ç',
      'chat': '‡§ö‡•à‡§ü',
      'track_order': '‡§≤‡§æ‡§á‡§µ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç',
      'featured': '‡§ñ‡§º‡§æ‡§∏',
      'fresh_from_organic_farms': '‡§ú‡•à‡§µ‡§ø‡§ï ‡§ñ‡•á‡§§‡•ã‡§Ç ‡§∏‡•á\n‡§§‡§æ‡§ú‡§æ',
      'direct_harvest_to_your_door': '‡§∏‡•Ä‡§ß‡•á ‡§Ü‡§™‡§ï‡•á\n‡§¶‡§∞‡§µ‡§æ‡§ú‡•á ‡§§‡§ï',
      'support_local_farmers_today': '‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡§æ\n‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§∞‡•á‡§Ç',
      'no_products_found_in_category': '‡§á‡§∏ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ',
      'description': '‡§µ‡§ø‡§µ‡§∞‡§£',
      'sold_out': '‡§¨‡§ø‡§ï ‡§ö‡•Å‡§ï‡§æ ‡§π‡•à',
      'product_added_to_cart': '{product_name} ‡§ï‡§æ‡§∞‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ',
      'order_placed': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§¶‡•á ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à!',
      'order_success_msg': '‡§ï‡§ø‡§∏‡§æ‡§® ‡§Ü‡§™‡§ï‡•Ä ‡§§‡§æ‡§ú‡§º‡§æ ‡§â‡§™‡§ú ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à‡•§',
      'awesome': '‡§¨‡§π‡•Å‡§§ ‡§¨‡§¢‡§º‡§ø‡§Ø‡§æ!',
      'delivery_address': '‡§°‡§ø‡§≤‡§ø‡§µ‡§∞‡•Ä ‡§™‡§§‡§æ',
      'enter_address_hint': '‡§™‡§§‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§≤‡§æ‡§á‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç',
      'total': '‡§ï‡•Å‡§≤',
      'place_order_cod': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§¶‡•á‡§Ç (COD)',
      'cart_empty': '‡§Ü‡§™‡§ï‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§ü ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à!',
      'active': '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø',
      'past': '‡§™‡•Å‡§∞‡§æ‡§®‡•á',
      'order_id': '‡§ë‡§∞‡•ç‡§°‡§∞ #{id}',
      'order_address': '‡§™‡§§‡§æ: {address}',
      'total_amount': '‡§ï‡•Å‡§≤ ‡§∞‡§æ‡§∂‡§ø',
      'no_orders_found': '‡§ï‡•ã‡§à {type} ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ',
      'track_order_live': '‡§≤‡§æ‡§á‡§µ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç',
      'daily_subscription': '‡§¶‡•à‡§®‡§ø‡§ï ‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ',
      'how_many_per_day': '‡§™‡•ç‡§∞‡§§‡§ø‡§¶‡§ø‡§® ‡§ï‡§ø‡§§‡§®‡•á {unit}?',
      'cancel': '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç',
      'confirm': '‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§Ç',
      'subscription_active': '‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à! üåø',
      'join_farmigo': '‡§´‡§æ‡§∞‡•ç‡§Æ‡§á‡§ó‡•ã ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡•á‡§Ç',
      'login_prompt': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§¶‡•á‡§®‡•á ‡§î‡§∞ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§≤‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§',
      'maybe_later': '‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç',
      'login': '‡§≤‡•â‡§ó‡§ø‡§®',
      'farmer_info_not_available': '‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
      'please_login_to_chat': '‡§ö‡•à‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç',
      'subscribe_now': '‡§Ö‡§≠‡•Ä ‡§∏‡§¨‡•ç‡§∏‡§ï‡•ç‡§∞‡§æ‡§á‡§¨ ‡§ï‡§∞‡•á‡§Ç',
    },
    'mr': {
      'welcome': '‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á',
      'good_morning': '‡§∂‡•Å‡§≠ ‡§™‡•ç‡§∞‡§≠‡§æ‡§§',
      'good_afternoon': '‡§∂‡•Å‡§≠ ‡§¶‡•Å‡§™‡§æ‡§∞',
      'good_evening': '‡§∂‡•Å‡§≠ ‡§∏‡§Ç‡§ß‡•ç‡§Ø‡§æ‡§ï‡§æ‡§≥',
      'friend': '‡§Æ‡§ø‡§§‡•ç‡§∞',
      'explore': '‡§§‡§æ‡§ú‡§æ ‡§ï‡§æ‡§™‡§£‡•Ä ‡§è‡§ï‡•ç‡§∏‡§™‡•ç‡§≤‡•ã‡§∞ ‡§ï‡§∞‡§æ',
      'search_hint': '‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á ‡§∂‡•ã‡§ß‡§æ...',
      'search_fresh_harvest': '‡§§‡§æ‡§ú‡•Ä ‡§ï‡§æ‡§™‡§£‡•Ä ‡§∂‡•ã‡§ß‡§æ...',
      'categories': '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä',
      'fresh_picks': '‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§§‡§æ‡§ú‡•Ä ‡§®‡§ø‡§µ‡§°',
      'add_to_cart': '‡§ï‡§æ‡§∞‡•ç‡§ü‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ú‡•ã‡§°‡§æ',
      'cart': '‡§Æ‡§æ‡§ù‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§ü',
      'orders': '‡§Æ‡§æ‡§ù‡•á ‡§Ü‡§¶‡•á‡§∂',
      'profile': '‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤',
      'dark_mode': '‡§Æ‡§ø‡§°‡§®‡§æ‡§á‡§ü ‡§Æ‡•ã‡§°',
      'language': '‡§≠‡§æ‡§∑‡§æ',
      'logout': '‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü',
      'manage_orders': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡§æ',
      'start_delivery': '‡§°‡§ø‡§≤‡§ø‡§µ‡•ç‡§π‡§∞‡•Ä ‡§∏‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§æ',
      'complete_delivery': '‡§°‡§ø‡§≤‡§ø‡§µ‡•ç‡§π‡§∞‡•Ä ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§∞‡§æ',
      'chat': '‡§ö‡•Ö‡§ü',
      'track_order': '‡§≤‡§æ‡§á‡§µ ‡§ü‡•ç‡§∞‡•Ö‡§ï ‡§ï‡§∞‡§æ',
      'featured': '‡§µ‡•à‡§∂‡§ø‡§∑‡•ç‡§ü‡•ç‡§Ø‡•Ä‡§ï‡•É‡§§',
      'fresh_from_organic_farms': '‡§∏‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§Ø ‡§∂‡•á‡§§‡§æ‡§§‡•Ç‡§®\n‡§§‡§æ‡§ú‡•á',
      'direct_harvest_to_your_door': '‡§•‡•á‡§ü ‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ\n‡§¶‡§æ‡§∞‡§æ‡§™‡§∞‡•ç‡§Ø‡§Ç‡§§',
      'support_local_farmers_today': '‡§∏‡•ç‡§•‡§æ‡§®‡§ø‡§ï ‡§∂‡•á‡§§‡§ï‡§±‡•ç‡§Ø‡§æ‡§Ç‡§®‡§æ\n‡§™‡§æ‡§†‡§ø‡§Ç‡§¨‡§æ ‡§¶‡•ç‡§Ø‡§æ',
      'no_products_found_in_category': '‡§Ø‡§æ ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ï‡•ã‡§£‡§§‡•Ä‡§π‡•Ä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á ‡§Ü‡§¢‡§≥‡§≤‡•Ä ‡§®‡§æ‡§π‡•Ä‡§§',
      'description': '‡§µ‡§∞‡•ç‡§£‡§®',
      'sold_out': '‡§∏‡§Ç‡§™‡§≤‡•á',
      'product_added_to_cart': '{product_name} ‡§ï‡§æ‡§∞‡•ç‡§ü‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ú‡•ã‡§°‡§≤‡•á',
      'order_placed': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§¶‡§ø‡§≤‡•Ä ‡§ó‡•á‡§≤‡•Ä ‡§Ü‡§π‡•á!',
      'order_success_msg': '‡§∂‡•á‡§§‡§ï‡§∞‡•Ä ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§§‡§æ‡§ú‡•Ä ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡•á ‡§§‡§Ø‡§æ‡§∞ ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•á.',
      'awesome': '‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü!',
      'delivery_address': '‡§°‡§ø‡§≤‡§ø‡§µ‡•ç‡§π‡§∞‡•Ä ‡§™‡§§‡•ç‡§§‡§æ',
      'enter_address_hint': '‡§™‡§§‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§≤‡§æ‡§à‡§µ‡•ç‡§π ‡§Æ‡§ø‡§≥‡§µ‡§æ',
      'total': '‡§è‡§ï‡•Ç‡§£',
      'place_order_cod': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§¶‡•ç‡§Ø‡§æ (COD)',
      'cart_empty': '‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§ï‡§æ‡§∞‡•ç‡§ü ‡§∞‡§ø‡§ï‡§æ‡§Æ‡•Ä ‡§Ü‡§π‡•á!',
      'active': '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø',
      'past': '‡§ú‡•Å‡§®‡•á',
      'order_id': '‡§ë‡§∞‡•ç‡§°‡§∞ #{id}',
      'order_address': '‡§™‡§§‡•ç‡§§‡§æ: {address}',
      'total_amount': '‡§è‡§ï‡•Ç‡§£ ‡§∞‡§ï‡•ç‡§ï‡§Æ',
      'no_orders_found': '‡§ï‡•ã‡§£‡§§‡•á‡§π‡•Ä {type} ‡§Ü‡§¶‡•á‡§∂ ‡§Ü‡§¢‡§≥‡§≤‡•á ‡§®‡§æ‡§π‡•Ä‡§§',
      'track_order_live': '‡§≤‡§æ‡§à‡§µ‡•ç‡§π ‡§ü‡•ç‡§∞‡•Ö‡§ï ‡§ï‡§∞‡§æ',
      'daily_subscription': '‡§¶‡•à‡§®‡§ø‡§ï ‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ',
      'how_many_per_day': '‡§¶‡§∞‡§∞‡•ã‡§ú ‡§ï‡§ø‡§§‡•Ä {unit}?',
      'cancel': '‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡§æ',
      'confirm': '‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡§æ',
      'subscription_active': '‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§Ü‡§π‡•á! üåø',
      'join_farmigo': 'Farmigo ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§∏‡§æ‡§Æ‡•Ä‡§≤ ‡§µ‡•ç‡§π‡§æ',
      'login_prompt': '‡§ë‡§∞‡•ç‡§°‡§∞ ‡§¶‡•á‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Ü‡§£‡§ø ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®‡§æ‡§Ç‡§ö‡•Ä ‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§ò‡•á‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ.',
      'maybe_later': '‡§®‡§Ç‡§§‡§∞',
      'login': '‡§≤‡•â‡§ó‡§ø‡§®',
      'farmer_info_not_available': '‡§∂‡•á‡§§‡§ï‡§±‡•ç‡§Ø‡§æ‡§ö‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä',
      'please_login_to_chat': '‡§ö‡•Ö‡§ü ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§æ',
      'subscribe_now': '‡§Ü‡§§‡§æ ‡§∏‡§¶‡§∏‡•ç‡§Ø‡§§‡§æ ‡§ò‡•ç‡§Ø‡§æ',
    },
  };

  String translate(String key, [Map<String, String>? placeholders]) {
    String text = _translations[_currentLocale]?[key] ?? key;
    if (placeholders != null) {
      placeholders.forEach((k, v) {
        text = text.replaceAll('{$k}', v);
      });
    }
    return text;
  }

  void setLanguage(String langCode) async {
    _currentLocale = langCode;
    notifyListeners();
    final prefs = await SharedPreferences.getInstance();
    prefs.setString(_langKey, langCode);
  }

  void _loadFromPrefs() async {
    final prefs = await SharedPreferences.getInstance();
    _currentLocale = prefs.getString(_langKey) ?? 'en';
    notifyListeners();
  }
}
